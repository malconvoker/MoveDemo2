{
	"name": "Player",
	"events": [
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player Turn",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Is player's turn"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 440857832862314,
							"parameters": {
								"variable": "Turn",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 667678923110119,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "PlayerBase",
									"sid": 164547734970871,
									"parameters": {
										"instance-variable": "TurnInProgress"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "PlayerBase",
									"sid": 815960842733409,
									"breakpoint": true,
									"parameters": {
										"instance-variable": "TurnInProgress",
										"value": "true"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 774548469282264,
									"parameters": {
										"variable": "TurnsTaken",
										"value": "1"
									}
								}
							],
							"sid": 759170145855192
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "PlayerBase",
									"sid": 331631153791176,
									"parameters": {
										"instance-variable": "TurnInProgress"
									}
								}
							],
							"actions": [],
							"sid": 260510118165632,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-nth-touch-start",
											"objectClass": "Touch",
											"sid": 446257320312853,
											"parameters": {
												"touch-number": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "CursorTest",
											"sid": 381289142698266,
											"parameters": {
												"x": "floor(Touch.X/Tile)*Tile",
												"y": "floor(Touch.Y/Tile)*Tile"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "CursorTest",
											"sid": 443253443592961,
											"parameters": {
												"instance-variable": "OldPos",
												"value": "Self.X*100+Self.Y"
											}
										},
										{
											"callFunction": "SetMoveTile",
											"sid": 649888695664012
										}
									],
									"sid": 576168694249243,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-tile-at",
													"objectClass": "Collisions",
													"sid": 815637461771642,
													"disabled": true,
													"parameters": {
														"tile-x": "CursorTest.X/Tile",
														"tile-y": "CursorTest.Y/Tile",
														"comparison": 1,
														"tile": "0"
													}
												}
											],
											"actions": [
												{
													"id": "find-path",
													"objectClass": "PlayerBase",
													"sid": 817223024525519,
													"disabled": true,
													"behaviorType": "Pathfinding",
													"parameters": {
														"x": "CursorTest.X",
														"y": "CursorTest.Y"
													}
												}
											],
											"sid": 891195654902075
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 947217751000976,
													"parameters": {
														"first-value": "Functions.GetTouchAngle % 90",
														"comparison": 0,
														"second-value": "0"
													}
												}
											],
											"actions": [],
											"sid": 448428730335646
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 177674548439291
												}
											],
											"actions": [],
											"sid": 404825193837788
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-nth-touch",
											"objectClass": "Touch",
											"sid": 903613713842558,
											"parameters": {
												"touch-number": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "CursorTest",
											"sid": 446680325721948,
											"parameters": {
												"x": "floor(Touch.X/Tile)*Tile",
												"y": "floor(Touch.Y/Tile)*Tile"
											}
										},
										{
											"callFunction": "SetMoveTile",
											"sid": 557656517478414
										}
									],
									"sid": 504122800687579,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "CursorTest",
													"sid": 717670760144631,
													"parameters": {
														"instance-variable": "OldPos",
														"comparison": 0,
														"value": "Self.X*100+Self.Y"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "CursorTest",
													"sid": 743952741269345,
													"parameters": {
														"instance-variable": "OldPos",
														"value": "Self.X*100+Self.Y"
													}
												}
											],
											"sid": 671173561882261,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-tile-at",
															"objectClass": "Collisions",
															"sid": 247939976103274,
															"parameters": {
																"tile-x": "CursorTest.X/Tile",
																"tile-y": "CursorTest.Y/Tile",
																"comparison": 1,
																"tile": "0"
															}
														}
													],
													"actions": [
														{
															"id": "find-path",
															"objectClass": "PlayerBase",
															"sid": 530971154909436,
															"disabled": true,
															"behaviorType": "Pathfinding",
															"parameters": {
																"x": "CursorTest.X",
																"y": "CursorTest.Y"
															}
														}
													],
													"sid": 442249740743464
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 342521499240236
														}
													],
													"actions": [
														{
															"id": "set-position",
															"objectClass": "MoveTile",
															"sid": 263929505187961,
															"parameters": {
																"x": "-100",
																"y": "-100"
															}
														}
													],
													"sid": 488870909566854,
													"disabled": true
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "Node",
															"sid": 796464015282494
														},
														{
															"id": "destroy",
															"objectClass": "OldMoveTile",
															"sid": 152526349944824
														}
													],
													"sid": 863803267630391,
													"disabled": true
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-nth-touch-end",
											"objectClass": "Touch",
											"sid": 955889077418823,
											"parameters": {
												"touch-number": "0"
											}
										}
									],
									"actions": [],
									"sid": 289163290714176,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 522137618033873,
													"parameters": {
														"first-value": "Functions.CursorDistance",
														"comparison": 0,
														"second-value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "PlayerBase",
													"sid": 825001603380173,
													"parameters": {
														"x": "CursorTest.X",
														"y": "CursorTest.Y"
													}
												}
											],
											"sid": 225384801452596,
											"disabled": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-tile-at",
													"objectClass": "Collisions",
													"sid": 547624193159729,
													"parameters": {
														"tile-x": "CursorTest.X/Tile",
														"tile-y": "CursorTest.Y/Tile",
														"comparison": 1,
														"tile": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "PlayerBase",
													"sid": 310451752841790,
													"parameters": {
														"x": "PlayerBase.X+PlayerBase.MoveX",
														"y": "PlayerBase.Y+PlayerBase.MoveY"
													}
												}
											],
											"sid": 985402851076699,
											"disabled": true
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-visible",
													"objectClass": "MoveTile",
													"sid": 649877285773597
												},
												{
													"id": "is-on-screen",
													"objectClass": "MoveTile",
													"sid": 411213623814403
												}
											],
											"actions": [
												{
													"callFunction": "MovePlayerOneTile",
													"sid": 680317021781231,
													"disabled": true,
													"parameters": [
														"Functions.GetTouchAngle"
													]
												}
											],
											"sid": 817969278176587,
											"children": [
												{
													"eventType": "comment",
													"text": "Attack enemy"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-overlapping-another-object",
															"objectClass": "MoveTile",
															"sid": 267647621873141,
															"parameters": {
																"object": "EnemyBases"
															}
														}
													],
													"actions": [
														{
															"callFunction": "DamageEnemy",
															"sid": 705284100137872,
															"parameters": [
																"PlayerBase.meleeDmg",
																"EnemyBases.UID"
															]
														},
														{
															"id": "set-animation",
															"objectClass": "PlayerMask",
															"sid": 618539730108339,
															"parameters": {
																"animation": "\"attack\"",
																"from": "beginning"
															}
														},
														{
															"id": "play",
															"objectClass": "Audio",
															"sid": 707570658217037,
															"parameters": {
																"audio-file": "hit_test",
																"loop": "not-looping",
																"volume": "-5",
																"tag-optional": "\"\""
															}
														},
														{
															"id": "subtract-from-instvar",
															"objectClass": "EnemyBases",
															"sid": 565510427162271,
															"disabled": true,
															"parameters": {
																"instance-variable": "hp",
																"value": "PlayerBase.meleeDmg"
															}
														},
														{
															"id": "add-to-eventvar",
															"objectClass": "System",
															"sid": 162386778384340,
															"disabled": true,
															"parameters": {
																"variable": "Turn",
																"value": "1"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 278896263239309,
															"disabled": true,
															"parameters": {
																"variable": "Turn",
																"value": "1"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 953715978781809,
															"disabled": true,
															"parameters": {
																"variable": "Turn",
																"value": "0.5"
															}
														},
														{
															"callFunction": "NextTurn",
															"sid": 566289830819691
														}
													],
													"sid": 922539239857905
												},
												{
													"eventType": "comment",
													"text": "Move"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-overlapping-another-object",
															"objectClass": "MoveTile",
															"sid": 767185658734522,
															"parameters": {
																"object": "EnemyBases"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "set-position",
															"objectClass": "PlayerBase",
															"sid": 190239950182516,
															"parameters": {
																"x": "MoveTile.ImagePointX(\"position\")",
																"y": "MoveTile.ImagePointY(\"position\")"
															}
														},
														{
															"id": "set-animation",
															"objectClass": "PlayerMask",
															"sid": 528139060083943,
															"parameters": {
																"animation": "\"walk\"",
																"from": "beginning"
															}
														},
														{
															"id": "play",
															"objectClass": "Audio",
															"sid": 690632954363201,
															"parameters": {
																"audio-file": "walk_sound_test",
																"loop": "not-looping",
																"volume": "0",
																"tag-optional": "\"\""
															}
														},
														{
															"id": "add-to-eventvar",
															"objectClass": "System",
															"sid": 848001728413945,
															"disabled": true,
															"parameters": {
																"variable": "Turn",
																"value": "1"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 221755900807508,
															"disabled": true,
															"parameters": {
																"variable": "Turn",
																"value": "1"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 631948610093005,
															"disabled": true,
															"parameters": {
																"variable": "Turn",
																"value": "0.5"
															}
														},
														{
															"callFunction": "NextTurn",
															"sid": 999424714414272
														},
														{
															"id": "set-position",
															"objectClass": "CursorTest",
															"sid": 677892631352889,
															"parameters": {
																"x": "-100",
																"y": "-100"
															}
														}
													],
													"sid": 982256776006362
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Skip Turn"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "CursorTest",
													"sid": 288847003307257,
													"parameters": {
														"object": "PlayerBase"
													}
												},
												{
													"id": "is-touching-object",
													"objectClass": "Touch",
													"sid": 541230234413800,
													"disabled": true,
													"parameters": {
														"object": "PlayerBase"
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 646238054071594,
													"disabled": true,
													"parameters": {
														"variable": "Turn",
														"value": "1"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 547157777022435,
													"disabled": true,
													"parameters": {
														"variable": "Turn",
														"value": "1"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 895719010517635,
													"disabled": true,
													"parameters": {
														"variable": "Turn",
														"value": "0.5"
													}
												},
												{
													"callFunction": "NextTurn",
													"sid": 563391418747399
												}
											],
											"sid": 484670023258986
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "CursorTest",
													"sid": 107300784663983,
													"parameters": {
														"x": "-100",
														"y": "-100"
													}
												},
												{
													"id": "set-position",
													"objectClass": "MoveTile",
													"sid": 288470583916878,
													"parameters": {
														"x": "-100",
														"y": "-100"
													}
												},
												{
													"id": "destroy",
													"objectClass": "Node",
													"sid": 704724540282995
												},
												{
													"id": "destroy",
													"objectClass": "OldMoveTile",
													"sid": 978686575234101
												}
											],
											"sid": 412118992753243
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [],
									"sid": 957703688317023
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 590654672273084
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "PlayerBase",
							"sid": 936498618960114,
							"parameters": {
								"instance-variable": "TurnInProgress",
								"value": "false"
							}
						}
					],
					"sid": 812174159845490,
					"disabled": true
				}
			],
			"sid": 592591885348526
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-overlapping-another-object",
					"objectClass": "MoveTile",
					"sid": 591983212937836,
					"parameters": {
						"object": "Collisions"
					},
					"isInverted": true
				},
				{
					"id": "is-overlapping-another-object",
					"objectClass": "CursorTest",
					"sid": 866366554274424,
					"parameters": {
						"object": "PlayerBase"
					},
					"isInverted": true
				},
				{
					"id": "is-touching-object",
					"objectClass": "Touch",
					"sid": 831637292953610,
					"disabled": true,
					"parameters": {
						"object": "PlayerBase"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-visible",
					"objectClass": "MoveTile",
					"sid": 208259699717056,
					"parameters": {
						"visibility": "visible"
					}
				}
			],
			"sid": 440202268528058
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "else",
					"objectClass": "System",
					"sid": 608974591082586
				}
			],
			"actions": [
				{
					"id": "set-visible",
					"objectClass": "MoveTile",
					"sid": 883268378724739,
					"parameters": {
						"visibility": "invisible"
					}
				}
			],
			"sid": 804763867055242
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-animation-finished",
					"objectClass": "PlayerMask",
					"sid": 629536571030210,
					"parameters": {
						"animation": "\"walk\""
					}
				},
				{
					"id": "on-animation-finished",
					"objectClass": "PlayerMask",
					"sid": 258562741647958,
					"parameters": {
						"animation": "\"attack\""
					}
				}
			],
			"actions": [
				{
					"id": "set-animation",
					"objectClass": "PlayerMask",
					"sid": 920494754950262,
					"parameters": {
						"animation": "\"idle\"",
						"from": "beginning"
					}
				}
			],
			"sid": 690884278422999,
			"isOrBlock": true
		}
	],
	"sid": 674070928567353
}